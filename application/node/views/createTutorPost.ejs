<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/mystyle.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"/>

    <title>Tutor Signup Page</title>
  </head>
  <body>

    <%- include('partials/header') %>
    
    <div style="text-align:center;"><strong> Software Engineering Project CSC 648-848, Fall 2021 For Demonstration Only</strong></div>
    <div style="text-align:center;"><strong> Fall 2021 | Section 3 | Team 3</strong></div>

    <section class="container">
      <div class="row content d-flex justify-content-center  mt-2">
        <div class="col-md-6 mt-0">
          <h3 class="h3 mb-4 text-center ">Create your Post Here!</h3>
          <div class="signup-form text-center box shadow bg-white p-4 ">
            <form action="/tutorPost" method="post" enctype="multipart/form-data" class="mb-3">
              <div class="row">
                
                <div class="form-floating mb-3 col-md-6">
                  <select class="form-select" id="majorShortName" name="majorShortName" aria-label="Floating label select example" onchange="updateCoursesBasedOnMajor(value)" required autofocus>
                    <option value="">Select One</option>
                    <% for(let i = 0; i < searchCategoriesShortName.length; i++) { %>
                      <option value="<%= searchCategoriesShortName[i]; %>"><%= searchCategoriesLongName[i];%></option>
                    <%}%>
                  </select>
                  <label for="majorShortName">Major<span class="text-danger">*</span></label>
                  
                </div>
                <div class="form-floating mb-3 col-md-6">
                  <select class="form-select" id="courseSelect" name="courseNumber" aria-label="Floating label select example" required autofocus>
                    <option value="">Select One</option>
                    <% for (let major in courseData) { %>
                      <% let majorArray = courseData[major] %>
                      <% for(let course in majorArray) { %>
                      <option value="<%= majorArray[course]['courseNumber']; %>"><%= majorArray[course]['courseLabel'] %></option>
                      <% } %>
                    <% } %> 
                  </select>
                  <label for="courseSelect">Courses</label>
                </div>
                <div class="form-floating mb-3">
                  <textarea class="form-control rounded-0" id="postDetails" name="postDetails" style="height: 150px" required autofocus></textarea>
                  <label for="postDetails" >Describe yourself<span class="text-danger">*</span></label>
                </div>
               
                <div class="mb-5">
                  <label for="postImage" class="form-label">Upload your Profile Image<span class="text-danger">*</span></label>
                    <input class="form-control" type="file" id="postImage" name="postImage" onchange="preview()" required autofocus>
                    <!-- <button onclick="clearImage()" class="btn btn-primary mt-3">Click me</button> -->
                </div>
                <img id="frame" src="" class="img-fluid" />
            
                <script>
                  function preview() {
                        frame.src = URL.createObjectURL(event.target.files[0]);
                    }
                    // REMOVED clear image button and function as it is not really needed if image is mandatory.
                    // function clearImage() {
                    //     document.getElementById('formFile').value = null;
                    //     frame.src = "";
                    // }
                </script>

                <div class="mb-3 col-md-8">
                  <input type="checkbox" class="form-check-input" id="terms_and_conditions" required>
                  <label class="form-check-label" for="terms_and_conditions">I agree to the site's <a href="#">terms and conditions</a><span class="text-danger">*</span></label>
                </div>
                <div class="mb-3 col-md-4">
                  <button class="btn btn-primary float-end">Create Post</button>
                </div>
<!--                <div class="text-center mt-3 text-secondary">-->
<!--                  Already have an account? <a href="/login">Login</a>-->
<!--                </div>-->
              </div>
            
            </form>
  
          </div>
        </div>
      </div>
    </section>
    

    
    <!-- Option 2: Separate Popper and Bootstrap JS -->
    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <script>

      // Use EJS and json to load all of the course data into a variable directly.
      // set our course select dropdown variable here to be loaded by the 
      // init function below.
      let dataForAllCourses = <%- JSON.stringify(courseData) %>;
      let courseSelect = null;

      // When a major is selected from the dropdown this function is called.
      function updateCoursesBasedOnMajor(selectedMajor) {
        
        // Remove all other items from the courses, leaving this at 1 will
        // keep the default "select one" option in the list while removing
        // the rest.
        courseSelect.length = 1;

        if(selectedMajor in dataForAllCourses) {

          appendCoursesFromMajorToSelect(selectedMajor)
        }
        else if(selectedMajor === "") {

          // Loop through every major in the dictionary and append all 
          // of the classes to the dropdown.
          for(let major in dataForAllCourses) {

            appendCoursesFromMajorToSelect(major)
          }
        }
      }

      function appendCoursesFromMajorToSelect(selectedMajor) {

        let majorData = dataForAllCourses[selectedMajor];
        for(let course of majorData) {
        
          let option = document.createElement('option');
          option.value = course['courseNumber'];
          option.innerHTML = course['courseLabel'];
          courseSelect.appendChild(option);
        }
      }

      (()=>{
        courseSelect = document.getElementById('courseSelect');
      })()
    </script>
  </body>
</html>






